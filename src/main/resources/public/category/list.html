<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>类目管理</title>
    <script src="/js/jquery-3.3.1.min.js"></script>
</head>
<style>
    table td, ul, li {
        border: solid black 1px;
    }
</style>
<body>
<div id="categoryTree"></div>
</body>
<script>
    var categoryTree = $("#categoryTree");
    var list = (target,parentId) => {
        $.get("list", {pid: parentId}, (result) => {
            switch (result.status) {
                case 200:
                    var ul = $(`<ul id="pid${parentId}"></ul>`);
                    $.each(result.content, (index, item) => {
                        ul.append(`<li id="${item.id}">${item.name}</li>`);
                    });
                    target.append(ul);
                    return;
                default:
                    alert(result.message);
            }
        },"json");
    };
    $("#categoryTree").click("li",(event)=>{
        list($(`#${event.target.id}`),event.target.id);
    });

    list(categoryTree,0);
</script>
</html>